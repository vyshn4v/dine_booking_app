<section class="admin_product_table table-responsive-sm">
    <form class="form-inline my-2 my-lg-0 d-flex justify-content-end py-3">
        <input class="form-control mr-sm-2 " type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
    </form>
    <div>
        <div class="thead-dark">
            <h4 class="p-5">users</h4>
        </div>
        <div>
            {{#each users}}
            <div class="row p-2 w-100 d-flex justify-content-end">
                <div class="col-12 col-sm-6 col-md-4 col-lg-3  d-flex justify-content-center align-items-center"><img
                        src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png"
                        style="width: 100px; height: 100px; border-radius: 50%;" alt=""></div>
                <div class="col-12 col-sm-6 col-md-4 col-lg-3  d-flex justify-content-center align-items-center">name :
                    vyshnav
                </div>
                <div class="col-12 col-sm-6 col-md-4 col-lg-3  d-flex justify-content-center align-items-center">
                    {{this.email}}</div>
                <div class="col-12 col-sm-6 col-md-6 col-lg-3 d-flex justify-content-end align-items-center">
                    <a href="#" class=" w-50 text-dark btn btn-warning ml-2" style="height: 40px;">ban user</a>
                    {{!-- <form action="delete_user/{{this._id}}" method="post">
                        <a type="submit" class="w-50 text-white btn btn-danger ml-2" style="height: 40px;">delete
                            user</a>
                    </form> --}}
                    <button type="button" class="w-50 text-white btn btn-danger ml-2" style="height: 40px;"
                        data-toggle="modal" data-target="#exampleModal{{this._id}}">
                        delete
                        user
                    </button>
                </div>
            </div>
            <hr>
            <div class="modal fade" id="exampleModal{{this._id}}" tabindex="-1" role="dialog"
                aria-labelledby="exampleModalLabel/{{this._id}}" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">confirm</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            delete user
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" onclick="banUser('{{this._id}}')"
                                data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary" onclick="deleteUser('{{this._id}}')">delete
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            {{/each}}
        </div>
    </div>

</section>
<script>
    const baseUrl = window.location.origin
    function deleteUser(userId) {
        fetch(`${baseUrl}/admin/delete-user/` + userId, {
            method: "DELETE"
        }).then(() => {
            location.reload()
            alert("user deleted")
        }).catch(() => {
            alert("user not deleted")
        })
    }
    function banUser(userId) {
        fetch(`${baseUrl}/admin/delete_user/` + userId, {
            method: "DELETE"
        }).then(() => {
            location.reload()
            alert("user deleted")
        }).catch(() => {
            alert("user not deleted")
        })
    }
</script>